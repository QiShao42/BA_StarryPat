# Qt èµ„æºæ–‡ä»¶è‡ªåŠ¨æ›´æ–°å·¥å…·

## åŠŸèƒ½è¯´æ˜

`update_resources.py` æ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨æ‰«æ `images` æ–‡ä»¶å¤¹å¹¶ç”Ÿæˆ `resources.qrc` æ–‡ä»¶çš„Pythonè„šæœ¬ã€‚

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿è¡Œï¼š

```bash
python update_resources.py
```

### æ–¹æ³•2ï¼šåŒå‡»è¿è¡Œ

ç›´æ¥åŒå‡» `update_resources.py` æ–‡ä»¶å³å¯è¿è¡Œã€‚

## åŠŸèƒ½ç‰¹ç‚¹

âœ… **è‡ªåŠ¨æ‰«æ**ï¼šé€’å½’æ‰«æ `images` æ–‡ä»¶å¤¹åŠå…¶æ‰€æœ‰å­æ–‡ä»¶å¤¹  
âœ… **æ™ºèƒ½è¯†åˆ«**ï¼šæ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆ.png, .jpg, .jpeg, .bmp, .gif, .svg, .icoï¼‰  
âœ… **è‡ªåŠ¨å¤‡ä»½**ï¼šç”Ÿæˆæ–°æ–‡ä»¶å‰è‡ªåŠ¨å¤‡ä»½ç°æœ‰çš„ `resources.qrc`  
âœ… **ç¾åŒ–è¾“å‡º**ï¼šç”Ÿæˆæ ¼å¼åŒ–çš„XMLæ–‡ä»¶ï¼Œæ˜“è¯»æ˜“ç»´æŠ¤  
âœ… **è¯¦ç»†æ—¥å¿—**ï¼šæ˜¾ç¤ºæ‰«æçš„æ–‡ä»¶æ ‘å’Œç»Ÿè®¡ä¿¡æ¯  

## è¾“å‡ºç¤ºä¾‹

```
============================================================
Qt Resources.qrc è‡ªåŠ¨ç”Ÿæˆå·¥å…·
============================================================

æ­£åœ¨æ‰«æ images æ–‡ä»¶å¤¹...

æ‰«æåˆ°çš„èµ„æºæ–‡ä»¶:
============================================================

ğŸ“ images/
  â”œâ”€ background.jpg

ğŸ“ images/invitation_ticket/
  â”œâ”€ (1310,953)ticket.png

ğŸ“ images/position_templates/
  â”œâ”€ (118,960)Hall.png
  â”œâ”€ (230,134)Cafe1.png
  â”œâ”€ (230,134)Cafe2.png

ğŸ“ images/student_avatar/
  â”œâ”€ äºšå­.png
  â”œâ”€ äºšå­ï¼ˆç¤¼æœï¼‰.png
  â”œâ”€ ä¼Šç»‡.png
  ...
============================================================

æ£€æµ‹åˆ°å·²å­˜åœ¨çš„ resources.qrc æ–‡ä»¶
âœ“ å·²å¤‡ä»½åŸæ–‡ä»¶ä¸º: resources.qrc.backup_20251129_150030

æ­£åœ¨ç”Ÿæˆæ–°çš„ resources.qrc æ–‡ä»¶...
âœ“ æˆåŠŸç”Ÿæˆ resources.qrc
âœ“ å…±åŒ…å« 49 ä¸ªèµ„æºæ–‡ä»¶

============================================================
å®Œæˆï¼
============================================================

æç¤º: è¯·åœ¨Qté¡¹ç›®ä¸­é‡æ–°ç¼–è¯‘èµ„æºæ–‡ä»¶
å‘½ä»¤: cmake --build . æˆ–è€…é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
```

## ç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼

```xml
<?xml version="1.0" encoding="UTF-8"?>
<RCC>
    <qresource prefix="/">
        <file>images/background.jpg</file>
        <file>images/invitation_ticket/(1310,953)ticket.png</file>
        <file>images/position_templates/(118,960)Hall.png</file>
        <file>images/position_templates/(230,134)Cafe1.png</file>
        <file>images/position_templates/(230,134)Cafe2.png</file>
        <file>images/student_avatar/äºšå­.png</file>
        <file>images/student_avatar/äºšå­ï¼ˆç¤¼æœï¼‰.png</file>
        <!-- ... æ›´å¤šæ–‡ä»¶ ... -->
    </qresource>
</RCC>
```

## å·¥ä½œæµç¨‹

1. **æ‰«ææ–‡ä»¶å¤¹**
   - é€’å½’éå† `images` æ–‡ä»¶å¤¹
   - è¯†åˆ«æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶

2. **å¤‡ä»½ç°æœ‰æ–‡ä»¶**
   - å¦‚æœ `resources.qrc` å·²å­˜åœ¨
   - è‡ªåŠ¨å¤‡ä»½ä¸º `resources.qrc.backup_æ—¶é—´æˆ³`

3. **ç”Ÿæˆæ–°æ–‡ä»¶**
   - åˆ›å»ºæ ¼å¼åŒ–çš„XMLæ–‡ä»¶
   - åŒ…å«æ‰€æœ‰æ‰«æåˆ°çš„èµ„æº

4. **é‡æ–°ç¼–è¯‘**
   - åœ¨Qté¡¹ç›®ä¸­é‡æ–°ç¼–è¯‘
   - èµ„æºæ–‡ä»¶å³å¯åœ¨ä»£ç ä¸­ä½¿ç”¨

## åœ¨ä»£ç ä¸­ä½¿ç”¨èµ„æº

ç”Ÿæˆ `resources.qrc` åï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ï¼š

```cpp
// ä½¿ç”¨èƒŒæ™¯å›¾ç‰‡
setBackgroundImage(":/images/background.jpg");

// ä½¿ç”¨ä½ç½®æ¨¡æ¿
QImage templateImage(":/images/position_templates/(118,960)Hall.png");

// ä½¿ç”¨å­¦ç”Ÿå¤´åƒ
QPixmap avatar(":/images/student_avatar/æ˜Ÿé‡.png");
```

## æ³¨æ„äº‹é¡¹

1. **è¿è¡Œä½ç½®**ï¼šå¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œè„šæœ¬
2. **Pythonç‰ˆæœ¬**ï¼šéœ€è¦ Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
3. **é‡æ–°ç¼–è¯‘**ï¼šä¿®æ”¹ `resources.qrc` åéœ€è¦é‡æ–°ç¼–è¯‘é¡¹ç›®
4. **å¤‡ä»½æ–‡ä»¶**ï¼šæ—§çš„å¤‡ä»½æ–‡ä»¶å¯ä»¥æ‰‹åŠ¨åˆ é™¤

## å¸¸è§é—®é¢˜

### Q: è„šæœ¬è¿è¡Œåï¼Œæ–°æ·»åŠ çš„å›¾ç‰‡æ— æ³•åœ¨ç¨‹åºä¸­ä½¿ç”¨ï¼Ÿ
**A:** éœ€è¦é‡æ–°ç¼–è¯‘é¡¹ç›®ã€‚è¿è¡Œ `cmake --build .` æˆ–åœ¨Qt Creatorä¸­é‡æ–°æ„å»ºã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„å›¾ç‰‡åˆ°èµ„æºæ–‡ä»¶ï¼Ÿ
**A:** 
1. å°†å›¾ç‰‡æ”¾åˆ° `images` æ–‡ä»¶å¤¹ï¼ˆæˆ–å…¶å­æ–‡ä»¶å¤¹ï¼‰
2. è¿è¡Œ `python update_resources.py`
3. é‡æ–°ç¼–è¯‘é¡¹ç›®

### Q: å¤‡ä»½æ–‡ä»¶å ç”¨ç©ºé—´ï¼Œå¯ä»¥åˆ é™¤å—ï¼Ÿ
**A:** å¯ä»¥ã€‚å¤‡ä»½æ–‡ä»¶ä»…ç”¨äºæ¢å¤ï¼Œç¡®è®¤æ–°æ–‡ä»¶æ­£å¸¸åå¯ä»¥åˆ é™¤ã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ
**A:** .png, .jpg, .jpeg, .bmp, .gif, .svg, .ico

## é«˜çº§ç”¨æ³•

### ä»…é¢„è§ˆä¸ç”Ÿæˆ

ä¿®æ”¹è„šæœ¬çš„ `main()` å‡½æ•°ï¼Œæ³¨é‡Šæ‰ `generate_qrc()` è°ƒç”¨ï¼š

```python
# generate_qrc(image_files, "resources.qrc")
```

### è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶å

```python
generate_qrc(image_files, "my_resources.qrc")
```

### æ·»åŠ å…¶ä»–æ–‡ä»¶ç±»å‹

åœ¨ `scan_images_folder()` å‡½æ•°ä¸­ä¿®æ”¹ï¼š

```python
image_extensions = {'.png', '.jpg', '.jpeg', '.bmp', '.gif', '.svg', '.ico', '.xml', '.json'}
```

## æ›´æ–°æ—¥å¿—

- **v1.0** (2025-11-29)
  - åˆå§‹ç‰ˆæœ¬
  - æ”¯æŒè‡ªåŠ¨æ‰«æå’Œç”Ÿæˆ
  - æ”¯æŒå¤‡ä»½å’Œç¾åŒ–è¾“å‡º

